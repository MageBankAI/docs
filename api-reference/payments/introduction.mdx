---
title: 'Introduction'
description: 'Process and manage payments between agents and external accounts'
---

The Payments API allows you to process financial transactions between agents and manage payment approvals. These endpoints provide comprehensive functionality for initiating, tracking, approving, and analyzing payments within the MageBank ecosystem.

## Payment Model

Each payment in the MageBank system consists of:

- **Identifiers**: Unique ID, name, and type
- **Participants**: Sender and receiver agent IDs
- **Status Tracking**: Current status and approval status flags
- **Financial Details**: Amount, currency, and payment method
- **Metadata**: Creation timestamp, approval timestamp, and other attributes

Here's an example of the payment data structure:

```json
{
  "id": "payee_wDG5cavUCoK53uvFzTvkey",
  "name": "Vendor XYZ Payment",
  "type": "EXTERNAL",
  "senderagentid": "agent_eC6ZezevNsqxvoKmQrUuoU",
  "receiveragentid": "agent_k77NTwxp2Ym3JCmVsKtXQA",
  "status": "New",
  "approvalstatus": "Waiting for Sender Approval",
  "approvalrequired": true,
  "paymentdetails": {
    "method": "CRYPTO_ADDRESS",
    "amount": 6,
    "currency": "USDC"
  },
  "contactdetails": {
    "email": "contact@vendorxyz.com",
    "phoneNumber": "+1234567890"
  },
  "tags": [
    "vendor",
    "regular"
  ],
  "createdat": "2025-04-17T10:28:18.512792+00:00",
  "approvedat": "2025-04-17T11:30:00.000000+00:00"
}
```

## Available Endpoints

<CardGroup>
  <Card title="Register Payment" icon="plus" href="/api-reference/payments/register-payment">
    Create a new payment transaction between agents
  </Card>
  <Card title="Approve Payment" icon="check" href="/api-reference/payments/approve-payment">
    Approve a payment that requires authorization
  </Card>
  <Card title="Decline Payment" icon="xmark" href="/api-reference/payments/decline-payment">
    Decline a payment to prevent processing
  </Card>
  <Card title="Get Payment" icon="eye" href="/api-reference/payments/get-payment">
    Fetch details of a specific payment
  </Card>
  <Card title="List User Payments" icon="list" href="/api-reference/payments/get-user-payments">
    Get all payments related to the user's agents
  </Card>
  <Card title="Export Payments" icon="file-export" href="/api-reference/payments/export-payments">
    Export payments data in various formats
  </Card>
</CardGroup>

## Payment Lifecycle

The typical lifecycle of a payment includes:

1. **Creation**: A payment is registered with sender, receiver, and amount details
2. **Approval Check**: The system determines if approval is required based on agent rules
3. **Approval/Decline**: If required, the payment is approved or declined by an authorized user
4. **Processing**: For approved payments, funds are transferred on the blockchain
5. **Completion**: The payment status is updated to "Confirmed" when complete

## Payment Types

MageBank supports two main types of payments:

- **EXTERNAL**: Payments to recipients outside the user's agent network
- **INTERNAL**: Transfers between the user's own agents

## Payment Status

Payments progress through various status states:

| Status | Description |
|--------|-------------|
| New | Payment has been created and is awaiting approval or processing |
| Waiting | System is checking whether approval is required |
| Confirmed | Payment has been fully processed |
| Failed | Payment processing encountered an error |

## Approval Status

Payments can have the following approval states:

| Approval Status | Description |
|-----------------|-------------|
| Waiting | Initial state before approval check |
| Waiting for Sender Approval | Approval required from sender |
| Approved | Payment has been explicitly approved |
| Declined | Payment has been explicitly declined |
| Pending | Payment is awaiting external confirmation |

## Best Practices

- Implement proper error handling to account for declined payments
- Regularly check payment statuses to ensure proper processing
- Use appropriate payment types (INTERNAL vs. EXTERNAL) based on the recipient
- Include meaningful payment names and tags for better organization
- Set up appropriate approval thresholds based on business requirements

## Next Steps

Use the endpoints in this section to manage payment operations. After processing payments, you can:

- Track [transaction history](/api-reference/transactions/get-transaction-summary) for financial reporting
- Set up [savings accounts](/api-reference/savings/introduction) to optimize idle funds
- Manage [agent funding](/api-reference/agents/deposit) based on payment patterns